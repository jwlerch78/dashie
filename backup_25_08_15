<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Dashboard</title>
<style>
  :root {
    --bg-left:  #0a0a0a;
    --bg-right: #111111;
  }

  html, body {
    height: 100%;
    margin: 0;
    background: #000;
  }

  body {
    display: grid;
    grid-template-columns: 1fr 12px 2fr;
    grid-template-rows: 100%;
    grid-template-areas: "left divider right";
    align-items: stretch;
    padding: 10px;
    box-sizing: border-box;
  }

  .left-col {
    grid-area: left;
    display: grid;
    grid-template-rows: 12.5% 1fr;
    row-gap: 8px;
    background: var(--bg-left);
    border-radius: 10px;
    overflow: hidden;
  }

  .divider {
    grid-area: divider;
    border-radius: 10px;
    background: linear-gradient(
      to bottom,
      rgba(255,255,255,0.22),
      rgba(255,255,255,0.08) 25%,
      rgba(255,255,255,0.08) 75%,
      rgba(255,255,255,0.22)
    );
    opacity: 0.7;
  }

  #right {
    grid-area: right;
    background: var(--bg-right);
    border-radius: 10px;
    border: 0;
    box-shadow: 0 0 12px rgba(0,0,0,0.7);
    transform: scale(0.6);
    transform-origin: top left;
    width: 166.6667%;
    height: 166.6667%;
  }

  .card {
    width: 100%;
    height: 100%;
    border: 0;
    background: transparent;
    box-shadow: 0 0 12px rgba(0,0,0,0.7);
    border-radius: 8px;
  }

  .agenda {
    transform: none;
    width: 100%;
    height: 100%;
    margin: 0;
    display: block;
  }

  /* Key log display at bottom-left */
  #keyLog {
    position: fixed;
    bottom: 10px;
    left: 10px;
    color: #fff;
    font-size: 24px;
    background: rgba(0,0,0,0.5);
    padding: 8px 12px;
    border-radius: 8px;
    z-index: 9999;
  }
</style>
</head>

<body>
  <!-- LEFT COLUMN -->
  <section class="left-col">
    <iframe class="card" id="dateTime" src="Date_Time.html" title="Date & Time"></iframe>
    <iframe class="card agenda" id="agenda" src="Agenda.html" title="Agenda"></iframe>
  </section>

  <div class="divider" aria-hidden="true"></div>

  <!-- RIGHT PANEL -->
  <iframe id="right" src="Weekly.html" title="Calendar"></iframe>

  <!-- Key log -->
  <div id="keyLog">Press a button on the remote</div>

  <script>
  const rightIframe = document.getElementById('right');
  const keyLog = document.getElementById('keyLog');

  document.addEventListener('keydown', (event) => {
    keyLog.textContent = `Key pressed: ${event.key} | keyCode: ${event.keyCode}`;

    switch(event.keyCode) {
      case 179: // Play/Pause - cycle through pages
        const src = rightIframe.src;
        if (src.includes("Weekly.html")) {
          rightIframe.src = "Work.html";
        } else if (src.includes("Work.html")) {
          rightIframe.src = "Monthly.html";
        } else {
          rightIframe.src = "Weekly.html";
        }
        break;

      case 227: // Rewind
        rightIframe.contentWindow.postMessage({ action: "prev" }, "*");
        break;

      case 228: // Fast Forward
        rightIframe.contentWindow.postMessage({ action: "next" }, "*");
        break;
    }
  });

  // Keep focus so key presses register
  function focusDashboard() {
    window.focus();
    document.body.focus();
  }
  focusDashboard();
  rightIframe.addEventListener('load', focusDashboard);
  setInterval(focusDashboard, 1000);
</script>

</body>
</html>
